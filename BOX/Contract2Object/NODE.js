global.Contract2Object=CLASS(n=>{let t=require("web3"),e=!1;if("undefined"!=typeof global.web3)global.web3=new t(global.web3.currentProvider),e=!0;else{let n=()=>{let e=new t.providers.WebsocketProvider("wss://"+(void 0===NODE_CONFIG.infuraServerName?"mainnet":NODE_CONFIG.infuraServerName)+".infura.io/ws/v3/"+NODE_CONFIG.infuraProjectId);return e.on("end",t=>{SHOW_ERROR("Contract2Object","WebsocketProvider의 접속이 끊어졌습니다. 재접속합니다."),web3.setProvider(n())}),e};global.web3=new t(n()),e=!0}let u=(n.checkWalletEnable=(()=>{return e}),(n,t)=>{if(0!==n.length){if(1===n.length){let e=n[0].type;if("[]"===e.substring(e.length-2)){let n=[],u=[];return EACH(t,(t,i)=>{e.indexOf("int")!==-1?(n.push(INTEGER(t)),u.push(t)):(n.push(t),u.push(t))}),{value:n,str:u}}return e.indexOf("int")!==-1?{value:INTEGER(t),str:t}:{value:t,str:t}}if(n.length>1){let e=[];return EACH(n,(n,u)=>{let i=n.type;if("[]"===i.substring(i.length-2)){let n=[];EACH(t[u],(t,e)=>{i.indexOf("int")!==-1?n.push(INTEGER(t)):n.push(t)}),e.push(n)}else i.indexOf("int")!==-1?e.push(INTEGER(t[u])):e.push(t[u])}),EACH(n,(n,u)=>{let i=n.type;if("[]"===i.substring(i.length-2)){let n=[];EACH(t[u],(t,e)=>{i.indexOf("int")!==-1?n.push(t):n.push(t)}),e.push(n)}else i.indexOf("int")!==-1?e.push(t[u]):e.push(t[u])}),{array:e}}}});return{init:(n,t,e)=>{let i=e.abi,o=e.address,s=(t.getAddress=(()=>{return o}),{}),r=new web3.eth.Contract(i,o);r.events.allEvents((n,t)=>{if(n===TO_DELETE){let n=s[t.event];void 0!==n&&EACH(n,n=>{n(t.returnValues)})}}),EACH(i,n=>{"function"===n.type&&(t[n.name]=((t,e)=>{void 0===e&&(e=t,t=void 0);let i,o,s;CHECK_IS_DATA(e)!==!0?i=e:(i=e.success,o=e.transactionAddress,s=e.error);let a=[];if(n.payable!==!0&&n.inputs.length<=1)0!==n.inputs.length&&a.push(t);else{let e=[];EACH(t,n=>{e.push(n)}),EACH(n.inputs,(n,u)=>{""!==n.name?a.push(t[n.name]):a.push(e[u])})}r.methods[n.name].apply(r.methods,a).call((e,o)=>{e!==TO_DELETE?void 0!==s?s(e.toString()):SHOW_ERROR(n.name,e.toString(),t):n.constant===!0&&void 0!==i&&(0===n.outputs.length?i():1===n.outputs.length?(o=u(n.outputs,o),i(o.value,o.str)):n.outputs.length>1&&(o=u(n.outputs,o),i.apply(TO_DELETE,o.array)))})}))});t.on=((n,t)=>{void 0===s[n]&&(s[n]=[]),s[n].push(t)}),t.off=((n,t)=>{void 0!==s[n]&&(void 0!==t&&REMOVE({array:s[n],value:t}),void 0!==t&&0!==s[n].length||delete s[n])});void 0!==global.UPPERCASE&&void 0!==UPPERCASE.ROOM&&UPPERCASE.ROOM("__Contract2Object/"+o,(n,t,e)=>{EACH(i,n=>{"function"===n.type&&t(n.name,(t,e)=>{let i=[];if(n.payable!==!0&&n.inputs.length<=1)0!==n.inputs.length&&i.push(t);else{let e=[];EACH(t,n=>{e.push(n)}),EACH(n.inputs,(n,u)=>{""!==n.name?i.push(t[n.name]):i.push(e[u])})}r.methods[n.name].apply(r.methods,i).call((i,o)=>{i!==TO_DELETE?SHOW_ERROR(n.name,i.toString(),t):n.constant===!0&&e(u(n.outputs,o))})})})})}}});