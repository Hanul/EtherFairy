global.Contract2Object=CLASS(n=>{let t=require("web3");if("undefined"!=typeof global.web3)global.web3=new t(global.web3.currentProvider);else{let n=()=>{let e=new t.providers.WebsocketProvider(CONFIG.isDevMode!==!0?"wss://mainnet.infura.io/ws":"wss://kovan.infura.io/ws");return e.on("end",t=>{SHOW_ERROR("Contract2Object","WebsocketProvider의 접속이 끊어졌습니다. 재접속합니다."),web3.setProvider(n())}),e};global.web3=new t(n())}let e=(n,t)=>{if(0!==n.length){if(1===n.length){let e=n[0].type;if("[]"===e.substring(e.length-2)){let n=[],i=[];return EACH(t,(t,u)=>{e.indexOf("int")!==-1?(n.push(INTEGER(t)),i.push(t)):(n.push(t),i.push(t))}),{value:n,str:i}}return e.indexOf("int")!==-1?{value:INTEGER(t),str:t}:{value:t,str:t}}if(n.length>1){let e=[];return EACH(n,(n,i)=>{let u=n.type;if("[]"===u.substring(u.length-2)){let n=[];EACH(t[i],(t,e)=>{u.indexOf("int")!==-1?n.push(INTEGER(t)):n.push(t)}),e.push(n)}else u.indexOf("int")!==-1?e.push(INTEGER(t[i])):e.push(t[i])}),EACH(n,(n,i)=>{let u=n.type;if("[]"===u.substring(u.length-2)){let n=[];EACH(t[i],(t,e)=>{u.indexOf("int")!==-1?n.push(t):n.push(t)}),e.push(n)}else u.indexOf("int")!==-1?e.push(t[i]):e.push(t[i])}),{array:e}}}};return{init:(n,t,i)=>{let u=i.abi,s=i.address,o=(t.getAddress=(()=>{return s}),{}),r=new web3.eth.Contract(u,s);r.events.allEvents((n,t)=>{if(n===TO_DELETE){let n=o[t.event];void 0!==n&&EACH(n,n=>{n(t.returnValues)})}}),EACH(u,n=>{"function"===n.type&&(t[n.name]=((t,i)=>{void 0===i&&(i=t,t=void 0);let u,s,o;CHECK_IS_DATA(i)!==!0?u=i:(u=i.success,s=i.transactionAddress,o=i.error);let f=[];if(0===n.inputs.length);else if(1===n.inputs.length)f.push(t);else if(n.inputs.length>1){let e=[];EACH(t,n=>{e.push(n)}),EACH(n.inputs,(n,i)=>{""!==n.name?f.push(t[n.name]):f.push(e[i])})}r.methods[n.name].apply(r.methods,f).call((i,s)=>{i!==TO_DELETE?void 0!==o?o(i.toString()):SHOW_ERROR(n.name,i.toString(),t):n.constant===!0&&void 0!==u&&(0===n.outputs.length?u():1===n.outputs.length?(s=e(n.outputs,s),u(s.value,s.str)):n.outputs.length>1&&(s=e(n.outputs,s),u.apply(TO_DELETE,s.array)))})}))});t.on=((n,t)=>{void 0===o[n]&&(o[n]=[]),o[n].push(t)}),t.off=((n,t)=>{void 0!==o[n]&&(void 0!==t&&REMOVE({array:o[n],value:t}),void 0!==t&&0!==o[n].length||delete o[n])});void 0!==global.UPPERCASE&&void 0!==UPPERCASE.ROOM&&UPPERCASE.ROOM("__Contract2Object/"+s,(n,t,i)=>{EACH(u,n=>{"function"===n.type&&t(n.name,(t,i)=>{let u=[];if(0===n.inputs.length);else if(1===n.inputs.length)u.push(t);else if(n.inputs.length>1){let e=[];EACH(t,n=>{e.push(n)}),EACH(n.inputs,(n,i)=>{""!==n.name?u.push(t[n.name]):u.push(e[i])})}r.methods[n.name].apply(r.methods,u).call((u,s)=>{u!==TO_DELETE?SHOW_ERROR(n.name,u.toString(),t):n.constant===!0&&i(e(n.outputs,s))})})})})}}});