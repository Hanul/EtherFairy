global.Contract2Object=CLASS(t=>{let e=!1;"undefined"!=typeof global.web3&&(global.web3=new Web3(global.web3.currentProvider),e=!0);let n=t.checkWalletEnable=(()=>{return e}),u=(t.checkWalletLocked=(t=>{web3.eth.getAccounts((e,n)=>{t(0===n.length)})}),t.getWalletAddress=(t=>{web3.eth.getAccounts((e,n)=>{t(n[0])})}),(t,e)=>{if(0!==t.length){if(1===t.length){let n=t[0].type;if(void 0!==e.toNumber)return{value:e.toNumber(),str:e.toString(10)};if("[]"===n.substring(n.length-2)){let t=[],n=[];return EACH(e,(e,u)=>{void 0!==e.toNumber?(t.push(e.toNumber()),n.push(e.toString(10))):(t.push(e),n.push(String(e)))}),{value:t,str:n}}return{value:e,str:String(e)}}if(t.length>1){let n=[];return EACH(t,(t,u)=>{let o=t.type;if(void 0!==e[u].toNumber)n.push(e[u].toNumber());else if("[]"===o.substring(o.length-2)){let t=[];EACH(e[u],(e,n)=>{void 0!==e.toNumber?t.push(e.toNumber()):t.push(e)}),n.push(t)}else n.push(e[u])}),EACH(t,(t,u)=>{let o=t.type;if(void 0!==e[u].toNumber)n.push(e[u].toString(10));else if("[]"===o.substring(o.length-2)){let t=[];EACH(e[u],(e,n)=>{void 0!==e.toNumber?t.push(e.toString(10)):t.push(String(e))}),n.push(t)}else n.push(String(e[u]))}),{array:n}}}});return{init:(t,e,o)=>{let i,s=o.abi,r=o.address,a=(e.getAddress=(()=>{return r}),{});if(n()===!0)i=web3.eth.contract(s).at(r),i.allEvents((t,e)=>{if(t===TO_DELETE){let t=a[e.event];void 0!==t&&EACH(t,t=>{t(e.args)})}}),EACH(s,t=>{"function"===t.type&&(e[t.name]=((e,n)=>{void 0===n&&(n=e,e=void 0);let o,s,r;CHECK_IS_DATA(n)!==!0?o=n:(o=n.success,s=n.transactionAddress,r=n.error);let a=[];if(t.payable!==!0&&t.inputs.length<=1)a.push(e);else{let n=[];EACH(e,t=>{n.push(t)}),EACH(t.inputs,(t,u)=>{""!==t.name?a.push(e[t.name]):a.push(n[u])})}t.payable===!0&&a.push({value:web3.toWei(e.ether,"ether")}),a.push((n,i)=>{if(n!==TO_DELETE)void 0!==r?r(n.toString()):SHOW_ERROR(t.name,n.toString(),e);else if(t.constant===!0)void 0!==o&&(0===t.outputs.length?o():1===t.outputs.length?(i=u(t.outputs,i),o(i.value,i.str)):t.outputs.length>1&&(i=u(t.outputs,i),o.apply(TO_DELETE,i.array)));else if(void 0!==s&&s(i),void 0!==o){let n=RAR(()=>{web3.eth.getTransactionReceipt(i,(u,i)=>{u!==TO_DELETE?void 0!==r?r(u.toString()):SHOW_ERROR(t.name,u.toString(),e):i===TO_DELETE||i.blockHash===TO_DELETE?n():o()})})}}),i[t.name].apply(i,a)}))});else if(void 0!==global.UPPERCASE&&void 0!==UPPERCASE.ROOM){let t=UPPERCASE.ROOM("__Contract2Object/"+r);EACH(s,n=>{"function"===n.type&&(e[n.name]=((e,u)=>{void 0===u&&(u=e,e=void 0);let o,i,s;CHECK_IS_DATA(u)!==!0?o=u:(o=u.success,i=u.transactionAddress,s=u.error);let r=[];if(n.payable!==!0&&n.inputs.length<=1)r.push(e);else{let t=[];EACH(e,e=>{t.push(e)}),EACH(n.inputs,(n,u)=>{""!==n.name?r.push(e[n.name]):r.push(t[u])})}n.payable===!0&&r.push(web3.toWei(e.ether,"ether")),r.push(),t.send({methodName:n.name,data:e},t=>{n.constant===!0&&void 0!==o&&(0===n.outputs.length?o():1===n.outputs.length?o(t.value,t.str):n.outputs.length>1&&o.apply(TO_DELETE,t.array))})}))})}e.on=((t,e)=>{void 0===a[t]&&(a[t]=[]),a[t].push(e)}),e.off=((t,e)=>{void 0!==a[t]&&(void 0!==e&&REMOVE({array:a[t],value:e}),void 0!==e&&0!==a[t].length||delete a[t])})}}});